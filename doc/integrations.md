This document is meant to provide a brief overview of the technical aspects of integrating
with various event providers.

# eventbrite.com


## Web Navigation

  TODO

## Event Extraction

### Embedded [OK]

- the embedded data comes in two flavors 

**aggregate json object**
`
window.__SERVER_DATA__ = {
                "app_name": "discover",
                "search_data": {
                    "events": {
                        "pagination": {
                            "object_count": 10000,
                            "page_count": 49,
                            "page_number": 1,
                            "page_size": 20,
                            "continuation": "eyJwYWdlIjoyfQ"
                        },
                        "results": [{
                            "id": "721239024337",
                            "eventbrite_event_id": "721239024337"
                            ...
                            }]
                        },
`
this has the added benefit of revealing the paginated response


**Schema Event island (for google caching)**

`<script type="application/ld+json"></script>`


### Ajax [OK]

there are two ajax requests that have responses containing event data.
One of them is promotional (as the name would imply)

https://www.eventbrite.com/api/v3/promoted/events

https://www.eventbrite.com/api/v3/destination/search/

this json response has a similar structure to the embedded json above with the added bonus that
it is purely json and not a script tag within an html document

### A common solution

as both the embedded and ajax responses follow the same json format we can collect all ids
by casting a wide net with this regex.

`Pattern pat = Pattern.compile("(?<=eventbrite_event_id\\\\\":\\\\\").*?(?=\\\\\",\\\\\"start)"); //what an ungodly creation`


## Special Considerations


eventbrite.com has a developer API that is freely availble.The one caveat is that
you can not use this API to discover events. However, once you have obtained event IDs all event 
data is easily retrieved from the API. 

eventbrite.com exposes a geographical window search through query parameters that make it
easy to scrape since we don't have to worry about reverse geocoding.

## Remarks

- Currently Implementation for web navigation locates numbers in the markup to determine how
  many pages are available. It has been determined that the json in the markup exposes the pagination
  information.

- It seems that all of the initial event data is in the markup. So the API could be bypassed
  if we were only interested in the non ajax content. Which is still alot of data if the paginated
  response contains pages in the 10s

- Currently event id discovery is done with a regex over the whole network archive, but we
  really only need to search /events ands the initial url



# meetup.com



## Web Navigation


  TODO
 
 
## Event Extraction


meetup.com embeds intial event data in the HTML document generated by hitting the target url.
as you scroll down the page to see more requests the page uses ajax to request more event data.


### Embedded [OK]


The embedded data is in the form of `Schema`. It exists within a pair of 
`<script type=\"application/ld+json\"></script>`
tags within the document

- the document contains several scripts of type `ld+json` , only one is preceeded with `<link rel="dns-prefetch" href="https://www.googletagmanager.com"/>`

### Ajax (Not implemented)


The ajax responses return event data in the form of `GraphQL`


## Special Considerations


meetup searches are rooted in a locality, but you can set a radius of exploration given that locality.
This makes it similar to eventbrite, but with the need to reverse geocode.


# allevents.in
 

## Web Navigation


we can find events within a named locality by manipulating this URL

`https://allevents.in/<locality>/all`

ex.

`https://allevents.in/brooklyn/all`

when localities exist within several regions we can get data for the
intended region by appended a region suffix.

`https://allevents.in/jackson-nj/all`
`https://allevents.in/jackson-ms/all`

when a region suffix is used, the  user gets redirected 
to a url sans suffix, but returns the correct data.
(I presume headers are set during the redirect to get the appropriate response)


## Event Extraction


### Embedded


The embedded data is in the form of `Schema`.
It exists within a pair of 

  `<script type=\"application/ld+json\"></script>` 
  
tags within the document.

- this data does not fully represent the underlying event
  - Start/End Datetime is missing time component
  - Description is absent


### Ajax (Not implemented)


## Special Considerations

allevents.com only exposes locality based searches. My API is structured around regional,
radius based searching. Currently, when scanning against allevents, we just scan the locality
that the geo coordinate maps to. In the future, this could be expanded and a utility can be made
to translate ( Radius, GeoCoordinate ) -> List<Locality> , then we can invoke a scan for each locality
in the region.

the embedded event Schema is incomplete and as a result, some data is spoofed.

